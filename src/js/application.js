Opal.modules["authentication/login_form"] = function(Opal) {/* Generated by Opal 1.8.2 */
  var $send = Opal.send, $truthy = Opal.truthy, $rb_plus = Opal.rb_plus, $def = Opal.def, self = Opal.top, $nesting = [], $$ = Opal.$r($nesting), nil = Opal.nil;

  Opal.add_stubs('box,drag,id,text,color,touch,component,empty?,strip,data,nil?,puts,+,encode,message,language=,authent_form');
  
  
  $def(self, '$authent_form', function $$authent_form() {
    var self = this, dark_grey = nil, grey = nil, light_grey = nil, eastern_blue = nil, view = nil, form = nil, email_box = nil, email_bordure_bas = nil, email_text = nil, password_box = nil, password_bordure_bas = nil, password_text = nil, connection = nil, creation = nil;

    
    dark_grey = (new Map([["red", 0.125], ["green", 0.125], ["blue", 0.125]]));
    grey = (new Map([["red", 0.208], ["green", 0.208], ["blue", 0.208]]));
    light_grey = (new Map([["red", 0.5], ["green", 0.5], ["blue", 0.5]]));
    eastern_blue = (new Map([["red", 0.118], ["green", 0.596], ["blue", 0.596]]));
    view = self.$box((new Map([["id", "poipoi"], ["left", 0], ["right", 0], ["top", 0], ["bottom", 0], ["height", "auto"], ["width", "auto"], ["color", (new Map([["red", 0.125], ["green", 0.125], ["blue", 0.125]]))]])));
    form = view.$box((new Map([["width", 500], ["height", 350], ["center", true], ["color", (new Map([["red", 0.208], ["green", 0.208], ["blue", 0.208]]))], ["smooth", 10]])));
    form.$drag((new Map([["restrict", view.$id()]])));
    email_box = form.$box((new Map([["width", 400], ["height", 50], ["center", true], ["top", 50], ["color", (new Map([["red", 0.208], ["green", 0.208], ["blue", 0.208]]))], ["id", "email_box"]])));
    email_bordure_bas = email_box.$box((new Map([["width", "inherit"], ["height", 2], ["bottom", 0], ["top", "auto"], ["color", (new Map([["red", 0.118], ["green", 0.596], ["blue", 0.596]]))]])));
    email_text = email_box.$text((new Map([["data", "Email"], ["left", 10], ["component", (new Map([["size", 16]]))], ["color", "white"], ["edit", true], ["id", "email_text_id"]])));
    password_box = form.$box((new Map([["width", 400], ["height", 50], ["center", true], ["top", 150], ["color", (new Map([["red", 0.208], ["green", 0.208], ["blue", 0.208]]))], ["id", "password"]])));
    password_bordure_bas = password_box.$box((new Map([["width", "inherit"], ["height", 2], ["bottom", 0], ["top", "auto"], ["color", (new Map([["red", 0.118], ["green", 0.596], ["blue", 0.596]]))]])));
    password_text = password_box.$text((new Map([["data", "Password"], ["edit", true], ["left", 10], ["component", (new Map([["size", 16]]))], ["color", "white"], ["id", "password_text_id"]])));
    connection = form.$box((new Map([["width", 100], ["height", 50], ["left", 50], ["top", 250], ["color", "white"], ["smooth", 5], ["border", (new Map([["thickness", 2], ["color", self.$color((new Map([["red", 0.118], ["green", 0.596], ["blue", 0.596]])))], ["pattern", "solid"]]))], ["text", (new Map([["int8", (new Map([["francais", "Se connecter"], ["english", "Login"]]))], ["color", "black"], ["center", (new Map([["x", 30], ["y", -1]]))]]))], ["id", "connection_btn"]])));
    $send(email_box, 'touch', [true], function $$1(){
      return email_text.$component((new Map([["selected", true]])))});
    $send(password_box, 'touch', [true], function $$2(){
      return password_text.$component((new Map([["selected", true]])))});
    $send(connection, 'touch', [true], function $$3(){var self = $$3.$$s == null ? this : $$3.$$s, mail = nil, pass = nil;

      if ((($truthy(email_text.$data()['$nil?']()) || ($truthy(email_text.$data().$strip()['$empty?']()))) && (($truthy(password_text.$data()['$nil?']()) || ($truthy(password_text.$data().$strip()['$empty?']())))))) {
        return self.$puts("Veuillez renseigner votre adresse email et votre mot de passe.")
      } else if (($truthy(email_text.$data()['$nil?']()) || ($truthy(email_text.$data().$strip()['$empty?']())))) {
        return self.$puts("Veuillez renseigner votre adresse email.")
      } else if (($truthy(password_text.$data()['$nil?']()) || ($truthy(password_text.$data().$strip()['$empty?']())))) {
        return self.$puts("Veuillez renseigner votre mot de passe.")
      } else {
        
        mail = email_text.$data();
        self.$puts($rb_plus("mail : ", mail));
        pass = $$('Black_matter').$encode(password_text.$data());
        self.$puts($rb_plus("pass : ", pass));
        $send($$('A'), 'message', [(new Map([["action", "authentication"], ["data", (new Map([["table", "identity"], ["particle", "email"], ["email", mail]]))]]))], function $$4(response){var self = $$4.$$s == null ? this : $$4.$$s;

          
          if (response == null) response = nil;
          return self.$puts("-2 " + (response));}, {$$s: self});
        return $send($$('A'), 'message', [(new Map([["action", "authorization"], ["data", (new Map([["table", "security"], ["particle", "password"], ["password", pass]]))]]))], function $$5(response){var self = $$5.$$s == null ? this : $$5.$$s;

          
          if (response == null) response = nil;
          return self.$puts("-1 " + (response));}, {$$s: self});
      }}, {$$s: self});
    creation = form.$box((new Map([["width", 110], ["height", 50], ["left", 340], ["top", 250], ["color", (new Map([["red", 0.208], ["green", 0.208], ["blue", 0.208]]))], ["smooth", 5], ["border", (new Map([["thickness", 2], ["color", self.$color((new Map([["red", 0.118], ["green", 0.596], ["blue", 0.596]])))], ["pattern", "solid"]]))], ["text", (new Map([["int8", (new Map([["francais", "Crer un compte"], ["english", "Create account"]]))], ["left", 10], ["color", "white"]]))], ["id", "creation_btn"]])));
    return $send(creation, 'touch', [true], function $$6(){var self = $$6.$$s == null ? this : $$6.$$s, mail = nil, pass = nil;

      if ((($truthy(email_text.$data()['$nil?']()) || ($truthy(email_text.$data().$strip()['$empty?']()))) && (($truthy(password_text.$data()['$nil?']()) || ($truthy(password_text.$data().$strip()['$empty?']())))))) {
        return self.$puts("Veuillez renseigner votre adresse email et votre mot de passe.")
      } else if (($truthy(email_text.$data()['$nil?']()) || ($truthy(email_text.$data().$strip()['$empty?']())))) {
        return self.$puts("Veuillez renseigner votre adresse email.")
      } else if (($truthy(password_text.$data()['$nil?']()) || ($truthy(password_text.$data().$strip()['$empty?']())))) {
        return self.$puts("Veuillez renseigner votre mot de passe.")
      } else {
        
        mail = email_text.$data();
        self.$puts($rb_plus("mail : ", mail));
        pass = $$('Black_matter').$encode(password_text.$data());
        self.$puts($rb_plus("pass : ", pass));
        return $$('A').$message((new Map([["action", "insert"], ["data", (new Map([["table", "user"], ["particles", (new Map([["email", mail], ["password", pass]]))]]))]])));
      }}, {$$s: self});
  });
  self.$text()['$language=']("francais");
  return self.$authent_form();
};

Opal.queue(function(Opal) {/* Generated by Opal 1.8.2 */
  var self = Opal.top, nil = Opal.nil;

  Opal.add_stubs('require');
  return self.$require("authentication/login_form")
});
